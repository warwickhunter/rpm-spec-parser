<project name="rpm-spec-parser-test" default="test">
    <description>Ant file to execute my RPM Specfile parser task and test its operation</description>

    <property name="dir.dist" value="${basedir}/build/libs" />

    <taskdef name="rpmspec" classname="org.computer.whunter.rpm.ant.RpmSpec" classpath="${dir.dist}/rpm-spec-parser-1.0.jar" />

    <rpmspec srcfile="src/test/resources/specs/p4bugzilla.spec" env="r" if="yes"/>
    <property name="foo" value="${r.source0}"/>

    <property name="do.it" value="true"/>
    <rpmspec srcfile="src/test/resources/specs/p4bugzilla.spec" env="yes1" if="do.it"/>
    <rpmspec srcfile="src/test/resources/specs/p4bugzilla.spec" env="yes2" if="${do.it}"/>
    <rpmspec srcfile="src/test/resources/specs/p4bugzilla.spec" env="yes3" if="yes"/>
    <rpmspec srcfile="src/test/resources/specs/p4bugzilla.spec" env="yes4" unless="no"/>
    <rpmspec srcfile="src/test/resources/specs/p4bugzilla.spec" env="no1" if="no"/>
    <rpmspec srcfile="src/test/resources/specs/p4bugzilla.spec" env="no2" unless="yes"/>
    <rpmspec srcfile="src/test/resources/specs/p4bugzilla.spec" env="no3" unless="${do.it}"/>
    
    <fail message="if condition not obeyed" unless="yes1.name"/>
    <fail message="if condition not obeyed" unless="yes2.name"/>
    <fail message="if condition not obeyed" unless="yes3.name"/>
    <fail message="unless condition not obeyed" unless="yes4.name"/>

	<fail message="if condition not obeyed" if="no1.name"/>
    <fail message="unless condition not obeyed" if="no2.name"/>
    <fail message="unless condition not obeyed" if="no3.name"/>
	
    <target name="test" description="test the task">
        <echo>rpm.name=${r.name}</echo>
        <echo>rpm.version=${r.version}</echo>
        <echo>rpm.release=${r.release}</echo>
        <echo>rpm.source0=${r.source0}</echo>
        <echo>rpm.who=${r.who}</echo>
        <echo>foo=${foo}</echo>
    </target>

</project>
